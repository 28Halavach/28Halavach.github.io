<!DOCTYPE html>
<html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>stamp</title>
        <link rel="icon" href="/images/flower.ico">
        <link href="prism.css" rel="stylesheet" />
        <script src="prism.js"></script>
      </head>
<body>  

    <p id="highlight-demo" style="border: 1px solid #ddd">Демо-элемент с <code>id="highlight-demo"</code>, за которым следит код примера выше.</p>

<script>
let observer = new MutationObserver(mutations => {
  for(let mutation of mutations) {

    for(let node of mutation.addedNodes) {
      if(!(node instanceof HTMLElement)) continue;

      if (node.matches('pre[class*="language-"]')) {
        Prism.highlightElement(node);
      }

      for(let elem of node.querySelectorAll('pre[class*="language"]')) {
        Prism.highlightElement(elem);
      }
    }
  }

});

let demoElem = document.getElementById('highlight-demo');

observer.observe(demoElem, {childList: true, subtree: true});

// динамически вставить содержимое как фрагменты кода
demoElem.innerHTML = `Фрагмент кода ниже:
  <pre class="language-javascript"><code> let hello = "world!"; </code></pre>
  <div>Ещё один:</div>
  <div>
    <pre class="language-css"><code>.class { margin: 5px; } </code></pre>
  </div>
`;
</script>


<script src="/part1/common.js"></script>
</body>
</html>

<!-- 
demoElem.innerHTML += `<hr><pre class="language-javascript"><code> let hello2 = "world!"; </code></pre>
  <div>Ещё один:</div>
  <div>
    <pre class="language-css"><code>.class { margin: 5px; } </code></pre>
  </div>`
 -->